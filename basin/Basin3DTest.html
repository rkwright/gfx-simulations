<!DOCTYPE html>
<html>
	<head>
		<!--
  			@author: rkwright@geofx.com
		-->
		<title>Basin 3D</title>
		<meta charset="UTF-8"/>

		<!-- Set the viewport size to the screen size, so it will be displayed maximized, but unscaled. -->
		<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1"/>

		<!-- Include several libraries from THREE.js and the Scene class  -->
		<script src="../three-js/three.js" type="text/javascript"></script>
		<script src="../three-js/Detector.js" type="text/javascript"></script>
		<script src="../three-js/OrbitControls-Touch-Ortho.js" type="text/javascript"></script>
		<script src="../three-js/stats.js" type="text/javascript"></script>
        <script src="../gfx/gfx-scene.js" type="text/javascript"></script>
        <script src="../maze/Maze.js"></script>
        <script src="../maze/MazeRat.js"></script>
        <script src="Basin.js"></script>
		<script src="Basin3D.js"></script>
	</head>
	<body style="margin:0;padding:0;border:0">
    <script type="text/javascript">
        var NCELLS = 4;
        var basin3D;

        var gfxScene = new GFX.Scene( {
            cameraPos : [-10, 10, -10],
            controls:true,
            displayStats:true
        });

        initializeDemo();

        animateScene();

        function findIndex( values, key, first,  last ) {
            if (values[first] <= key && values[first+1] >= key) { // stopping condition

                return first;
            }

            var imid = first + (last - first) / 2;

            if (first === last || imid === first) {
                return -1;
            }
            if (values[imid] > key) {
                return findIndex(values, key, first, imid);
            }
            else if (values[imid] <= key) {
                return findIndex( values, key, imid, last);
            }
        }

        /**
         * Initialize the Demo.
         */
        function initializeDemo() {

            var startTime = performance.now();

            basin3D = new BASIN3D.Basin3D(NCELLS);

            var elapsed = (performance.now() - startTime)/1000.0;
            console.log("Basin complete! elapsed: " +  elapsed.toFixed(3)  );
        }

        /**
         * Animate the scene and call rendering.
         */
        function animateScene() {

            requestAnimationFrame(animateScene);

            gfxScene.renderScene();
        }

    </script>

	</body>
</html>
